% -*- Mode:TeX -*-
%DIF LATEXDIFF DIFFERENCE FILE
%DIF DEL ../oldthesisdraft/main.tex   Tue Aug  9 12:13:24 2016
%DIF ADD main.tex                     Tue Aug  9 12:12:54 2016

%% The documentclass options along with the pagestyle can be used to generate
%% a technical report, a draft copy, or a regular thesis.  You may need to
%% re-specify the pagestyle after you \include  cover.tex.  For more
%% information, see the first few lines of mitthesis.cls. 

%\documentclass[12pt,vi,twoside]{mitthesis}
%%
%%  If you want your thesis copyright to you instead of MIT, use the
%%  ``vi'' option, as above.
%%
%\documentclass[12pt,twoside,leftblank]{mitthesis}
%%
%% If you want blank pages before new chapters to be labelled ``This
%% Page Intentionally Left Blank'', use the ``leftblank'' option, as
%% above. 

%\documentclass[12pt]{mitthesis}
%\documentclass[12pt,singlespace,twoside]{mitthesis}
%DIF 21a21
%\documentclass{tufte-book} %DIF > 
%DIF -------
\documentclass[12pt,twoside]{mitthesis}
\usepackage{lgrind}
\usepackage{todonotes}
\usepackage{subcaption}
\usepackage{cmap}
\usepackage[T1]{fontenc}
\usepackage{array}
\usepackage{graphicx}
\usepackage{caption}
%DIF 30a31-39
\usepackage{csquotes} %DIF > 
\usepackage{sidecap} %DIF > 
\usepackage{verbatim} %DIF > 
\usepackage{tabularx} %DIF > 
\usepackage{enumitem} %DIF > 
\setlist{nosep} %DIF > 
 %DIF > 
\sidecaptionvpos{figure}{c} %DIF > 
 %DIF > 
%DIF -------
%\usepackage{subfigure}
%\documentclass[12pt,oneside]{mitthesis}
%\usepackage{lgrind}
\usepackage{url}
\usepackage{textcomp}
\usepackage{verbatim}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}    % if you want extra symbols
\usepackage{mathrsfs}
\usepackage{program}
\usepackage{newlfont}
\usepackage{rotating}
\usepackage{varioref}
\usepackage{graphicx}
%\usepackage{txfont}
\usepackage{makeidx}
\usepackage{tocbibind}
\usepackage{program}
\usepackage{import}
%\usepackage{subfigure}
\usepackage{verbatim}
\usepackage{colortbl}
\usepackage{todonotes}
%DIF 54a64-66
\usepackage{parskip} %DIF > 
%\usepackage{booktabs} %DIF > 
\usepackage{microtype} %DIF > 
%DIF -------

%\usepackage[LY1]{fontenc}
%\usepackage{patchcmd}
%\usepackage{myfss}
%\usepackage{caslon}
%\renewcommand{\encodingdefault}{LY1}
%\rmshape \rgshape

%\usepackage[oldstyle]{garamond}
%\usepackage[lining]{agaramond}
\usepackage[small]{eulervm}
\usepackage{courier} % for texttt



\usepackage[numbers,square,sort&compress]{natbib}
\usepackage[pdftex,plainpages=false,breaklinks=true,colorlinks=true,urlcolor=blue,citecolor=blue, linkcolor=blue,bookmarks=true,bookmarksopen=true,bookmarksopenlevel=0,pdfstartview=Fit,pdfview=Fit,pagebackref,linktocpage=true,bookmarksnumbered=true]{hyperref}
\usepackage{hypernat}
\usepackage{array}
\usepackage{supertabular}

%%% stuff for doxygen
%\usepackage{times}
\usepackage{multicol}
\usepackage{multirow}
\usepackage{float}
\usepackage{alltt}
%\usepackage{Body/appb/doxygen}
%%%%%%%%%%%

% create a shortcut to typeset table headings
\newcommand\tabhead[1]{\small\textbf{#1}}
\usepackage{courier}
%\newcommand \codevar[1]{\texttt{#1}}
\usepackage{expl3,xparse} 
\ExplSyntaxOn 
\NewDocumentCommand \lstcolorlines { O{green} m } 
{ \clist_if_in:nVT { #2 } { \the\value{lstnumber} }{ \color{#1} } } 
\ExplSyntaxOff
\definecolor{mygray}{rgb}{0.925,0.925,0.925}
\definecolor{lightyellow}{HTML}{FFE600}


% Arabic page numbers for submission. 
% Remove this line to eliminate page numbers for the camera ready copy
\pagenumbering{arabic}


% Load basic packages
\usepackage{balance}  % to better equalize the last page
\usepackage{graphics} % for EPS, load graphicx instead
\usepackage{times}    % comment if you want LaTeX's default font
\usepackage{url}      % llt: nicely formatted URLs
\usepackage{comment}
\usepackage{listings}
\usepackage{lstlinebgrd}

\usepackage[T1]{fontenc}
%DIF 115c128
%DIF < \usepackage[scaled=0.80]{beramono}
%DIF -------
%\usepackage[scaled=0.80]{beramono} %DIF > 
%DIF -------
\usepackage{color}
\usepackage{multirow}
\definecolor{bluekeywords}{rgb}{0.13,0.13,1}
\definecolor{greencomments}{rgb}{0,0.5,0}
\definecolor{redstrings}{rgb}{0.9,0,0}
\lstset{
showspaces=false,
showtabs=false,
breaklines=true,
showstringspaces=false,
breakatwhitespace=true,
escapeinside={(*@}{@*)},
commentstyle=\color{greencomments},
morekeywords = {MultiType},
keywordstyle=\color{bluekeywords}\bfseries,
stringstyle=\color{redstrings},
basicstyle=\ttfamily\footnotesize,
numbers=none, xleftmargin=.1in, numbersep=3pt
}

% Symbols used by the authors
    \DeclareMathOperator{\suffix}{suffix}
    \DeclareMathOperator{\prefix}{prefix}
    \DeclareMathOperator{\prob}{Pr}
\newcommand{\conv}{\curvearrowright}
\newcommand{\ttt}[1]{\texttt{#1}}
\newcommand{\vect}[1]{\begin{pmatrix}#1\end{pmatrix}}
\newcommand{\paren}[1]{\left(#1\right)}
\newcommand{\brac}[1]{\left[#1\right]}
\newcommand{\braces}[1]{\left\{#1\right\}}
\newcommand{\avector}[2]{(#1_1,#1_2,\ldots,#1_{#2})} 
\newcommand{\aset}[2]{{#1_1,#1_2,\ldots,#1_{#2}}} 
\newcommand{\ith}[1]{\ensuremath{{#1^{\textrm{th}}}}} 
\newcommand{\nd}[1]{\ensuremath{{#1^{\textrm{nd}}}}} 
%DIF 150c163
%DIF < \DeclareSymbolFont{AMSb}{U}{msb}{m}{n}
%DIF -------
%\DeclareSymbolFont{AMSb}{U}{msb}{m}{n} %DIF > 
%DIF -------
\DeclareMathSymbol{\N}{\mathbin}{AMSb}{"4E}
\DeclareMathSymbol{\realNums}{\mathbin}{AMSb}{"52}


\newcommand{\curls}[1]{\left\{#1\right\}}
%\newcommand{\teirRegEx}{\ensuremath{\paren{\Sigma\cup\curls{\brac{\Sigma\Sigma^{\ast}\Sigma}}}\paren{\Sigma\cup\curls{.}\cup\curls{\brac{\Sigma\Sigma^{\ast}\Sigma}}}^{\ast}\paren{\Sigma\cup\curls{\brac{\Sigma\Sigma^{\ast}\Sigma}}}\cup\Sigma}}
\newcommand{\teirRegEx}{\ensuremath{\Sigma\paren{\Sigma\cup\curls{.}}\Sigma}}
\newcommand{\teiresias}{\texttt{TEIRESIAS}}
\newcommand{\Teiresias}{\texttt{TEIRESIAS}}
\newcommand{\Fasta}{FastA}
\newcommand{\fasta}{FastA}
\newcommand{\psiblast}{psi--Blast}
\newcommand{\prosite}{PROSITE}
\newcommand{\biodictionary}{Bio--Dictionary}
\newcommand{\genbank}{GENBANK}
\newcommand{\embl}{EMBL}
\newcommand{\etal}{\emph{et.\ al.\ }}
\newcommand{\sptr}{SwissProt/TrEMBL}
\newcommand{\swissp}{SWISS--PROT}
\newcommand{\swissprot}{\swissp}
\newcommand{\swissptr}{SWISS--PROT/TrEMBL}
\newcommand{\swissprottrembl}{\swissptr}
\newcommand{\amsdb}{AMSDb}
\newcommand{\ncbi}{NCBI}
\newcommand{\blosum}{BLOSUM}
\newcommand{\pam}{PAM}
\newcommand{\oligo}{oligonucleotide}
\newcommand{\Oligo}{Oligonucleotide}
\newcommand{\blast}{BLAST}
\newcommand{\pr}[1]{\prob\left(#1\right)}
\newcommand{\prt}[1]{\prob\left(\textrm{#1}\right)}
\newcommand{\cp}[2]{\prob\left(#1\mid #2\right)}
\newcommand{\cpt}[2]{\prob\left(\textrm{#1}\mid \textrm{#2}\right)}
\newcommand{\ex}[1]{\mathbf{E}\left[#1\right]}
%\newcommand{\var}[1]{\textrm{var}\left(#1\right)}
\newcommand{\phip}[3]{\Phi\paren{\frac{#1-\paren{#2}}{#3}}}
%\newcommand{\vect}[1]{\mathbf{#1}}
\newcommand{\ten}[1]{\mathbf{#1}}
\newcommand{\pdf}[2]{p_{#1}\left(#2\right)}
\newcommand{\pmf}[2]{p_{#1}\left(#2\right)}
\newcommand{\transf}[2]{M_{#1}\left(#2\right)}
\newcommand{\expo}[1]{\exp\left[#1\right]}
\newcommand{\pd}[2]{\frac{\partial}{\partial #2}\brac{#1}}
\setlength{\extrarowheight}{3pt}
\newcommand{\marnote}[1]{\marginpar{\raggedleft\footnotesize\bfseries\hspace{0pt} #1}}

\usepackage{fancyhdr}
%\renewcommand{\chaptermark}[1]{\markboth{\textit{\chaptername}\ \thechapter.\ #1}{}}

%this defines the basic headers and footer
% styles when we use the 'fancyhdr' styles
%\lhead[\fancyplain{}{\itshape\footnotesize\thepage}]{\fancyplain{}{\itshape\footnotesize\rightmark}}
%\rhead[\fancyplain{}{\itshape\footnotesize\leftmark}]{\fancyplain{}{\itshape\footnotesize\thepage}}
%\lhead[\fancyplain{}\bfseries\thepage]{\fancyplain{}\bfseries\rightmark}
%\rhead[\fancyplain{}\bfseries\leftmark]{\fancyplain{}\bfseries\thepage}
%\pagestyle{fancyplain}
\addtolength{\headwidth}{0.5\marginparsep}
\addtolength{\headwidth}{0.5\marginparwidth}
%\renewcommand{\chaptermark}[1]{\markboth{#1}{}}
%\renewcommand{\sectionmark}[1]{\markright{\thesection\ #1}}
\lhead[\fancyplain{}{\footnotesize\thepage}]{\fancyplain{}{\footnotesize\rightmark}}
\rhead[\fancyplain{}{\footnotesize\leftmark}]{\fancyplain{}{\footnotesize\thepage}}
\cfoot{}
\cfoot{}

% Special Float captions
% Different font in captions
\newcommand{\captionfonts}{\mdseries}
\newcommand{\floatnamefonts}{\bfseries}
\makeatletter  % Allow the use of @ in command names
\long\def\@makecaption#1#2{%
  \vskip\abovecaptionskip
  \sbox\@tempboxa{{\floatnamefonts #1:~~\captionfonts #2}}%
  \ifdim \wd\@tempboxa >\hsize
    {\floatnamefonts #1: \captionfonts #2\par}
  \else
    \hbox to\hsize{\hfil\box\@tempboxa\hfil}%
  \fi
  \vskip\belowcaptionskip}
\makeatother   % Cancel the effect of \makeatletter

\makeindex

\pagestyle{plain}


\usepackage{courier}
%DIF 238a251
%\usepackage{unicode-math} %DIF > 
%DIF -------

\newcommand \codevar[1]{\texttt{#1}}

%% This bit allows you to either specify only the files which you wish to
%% process, or `all' to process all files which you \include.
%% Krishna Sethuraman (1990).

%\typein [\files]{Enter file names to process, (chap1,chap2 ...), or `all' to process all files:}
%\def\all{all}
%\ifx\files\all \typeout{Including all files.} \else \typeout{Including only \files.} \includeonly{\files} \fi
%\DeclareMathAlphabet{\mathnormal}{OMS}{cmsy}{m}{n} %DIF > 
%\setmathfont{Latin Modern Math} %DIF > 
%DIF PREAMBLE EXTENSION ADDED BY LATEXDIFF
%DIF UNDERLINE PREAMBLE %DIF PREAMBLE
\RequirePackage[normalem]{ulem} %DIF PREAMBLE
\RequirePackage{color}\definecolor{RED}{rgb}{1,0,0}\definecolor{BLUE}{rgb}{0,0,1} %DIF PREAMBLE
\providecommand{\DIFaddtex}[1]{{\protect\color{blue}\uwave{#1}}} %DIF PREAMBLE
\providecommand{\DIFdeltex}[1]{{\protect\color{red}\sout{#1}}}                      %DIF PREAMBLE
%DIF SAFE PREAMBLE %DIF PREAMBLE
\providecommand{\DIFaddbegin}{} %DIF PREAMBLE
\providecommand{\DIFaddend}{} %DIF PREAMBLE
\providecommand{\DIFdelbegin}{} %DIF PREAMBLE
\providecommand{\DIFdelend}{} %DIF PREAMBLE
%DIF FLOATSAFE PREAMBLE %DIF PREAMBLE
\providecommand{\DIFaddFL}[1]{\DIFadd{#1}} %DIF PREAMBLE
\providecommand{\DIFdelFL}[1]{\DIFdel{#1}} %DIF PREAMBLE
\providecommand{\DIFaddbeginFL}{} %DIF PREAMBLE
\providecommand{\DIFaddendFL}{} %DIF PREAMBLE
\providecommand{\DIFdelbeginFL}{} %DIF PREAMBLE
\providecommand{\DIFdelendFL}{} %DIF PREAMBLE
%DIF END PREAMBLE EXTENSION ADDED BY LATEXDIFF
%DIF PREAMBLE EXTENSION ADDED BY LATEXDIFF
%DIF HYPERREF PREAMBLE %DIF PREAMBLE
\providecommand{\DIFadd}[1]{\texorpdfstring{\DIFaddtex{#1}}{#1}} %DIF PREAMBLE
\providecommand{\DIFdel}[1]{\texorpdfstring{\DIFdeltex{#1}}{}} %DIF PREAMBLE
%DIF END PREAMBLE EXTENSION ADDED BY LATEXDIFF

\begin{document}
%\fontencoding{LY1}\fontfamily{ACaslonPro}\mdweight

%\input{Body/cover}
\pagestyle{plain}
%\input{Body/contents}

%now start the fancy headings
\pagestyle{fancyplain}
\addtolength{\headheight}{\baselineskip}
%add a nice little line underneath the heading
%\renewcommand{\headrulewidth}{0.6pt}

%DIF < \input{Body/intro.tex}
%DIF > \input{Body/new_intro.tex}
%\input{Body/relatedWork}
%\input{Body/overcode}
\chapter{Foobaz: Feedback on Variable Names at Scale}\label{chapter:foobaz}

\DIFdelbegin \DIFdel{Current traditional feedback methods, such as hand-grading student code for substance and style, are labor intensive and do not scale. We created a user interface that addresses feedback at scale for a particular and important aspect of code quality: }\DIFdelend \DIFaddbegin \DIFadd{This chapter presents the second example of clustering, visualizing, and giving feedback on an aspect of student solutions, i.e., the variety of student-chosen }\DIFaddend variable names. \DIFdelbegin \DIFdel{We built this user interface on top of an existing back-end that distinguishes variables by their behavior in the program. Therefore ourinterface not only allows teachers to comment on poor variable names, they can comment on names that mislead the reader about the variable's role in the program.
We ran two user studies in which 10 teachers and 6 students created and received feedback , respectively. The interface helped teachers give personalized variable name feedback on thousands }\DIFdelend \DIFaddbegin \DIFadd{It is adapted and updated from a paper presented at the ACM Symposium on User Interface Software and Technology (UIST) in 2015~\mbox{%DIFAUXCMD
\cite{foobaz}}%DIFAUXCMD
. Pronouns like ``we'' and ``our'' refer to the coauthors of the UIST paper.
}

\DIFadd{When providing feedback on the substance and style }\DIFaddend of student solutions\DIFdelbegin \DIFdel{from an edX introductory programming MOOC. In the second study, students composed solutions to the same programming assignments and immediately received personalized quizzes composed by teachers in the previous user study. }%DIFDELCMD < 

%DIFDELCMD < \section{Introduction}
%DIFDELCMD < 

%DIFDELCMD < %%%
\DIFdel{Current traditional feedback methods for solutions to programming assignments include }\DIFdelend \DIFaddbegin \DIFadd{, the status quo is grading by hand. Unfortunately, }\DIFaddend hand-grading \DIFdelbegin \DIFdel{student code for substance and style. Unfortunately, those methods are }\DIFdelend \DIFaddbegin \DIFadd{is }\DIFaddend labor intensive, potentially inconsistent across graders, and \DIFdelbegin \DIFdel{do }\DIFdelend \DIFaddbegin \DIFadd{does }\DIFaddend not scale to the sizes associated with Massive Open Online Courses (MOOCs). \DIFdelbegin \DIFdel{The scaling difficulty is particularly important when considering that  some residential course enrollments at prominent universities, like }\DIFdelend \DIFaddbegin \DIFadd{Residential courses are also becoming massive. For example, }\DIFaddend UC Berkeley's \DIFaddbegin \DIFadd{introduction to programming, }\DIFaddend CS61A, \DIFdelbegin \DIFdel{are rising above the thousand-student mark }\DIFdelend \DIFaddbegin \DIFadd{has had more than a thousand students enrolled per semester~}\DIFaddend \cite{biggestClass}. Some Computer Science teachers, such as MIT's John Guttag and Ana Bell, are simultaneously teaching hundreds of students in residential programming courses and thousands of online students in MOOC versions \DIFaddbegin \DIFadd{of their courses}\DIFaddend .

Variable naming is a specific, important aspect of writing readable, maintainable code, and many teachers want to give feedback on it. The quality of a name is \DIFdelbegin \DIFdel{most easily }\DIFdelend \DIFaddbegin \DIFadd{best }\DIFaddend judged when its role within the surrounding code is known. However, at scale, teachers cannot read every solution. Programming education at scale opens up new challenges for processing and presenting thousands of solutions so that teachers can more easily view them. Teachers also cannot write comments on each solution. This difficulty motivates the creation of tools that help teachers give customized feedback\DIFdelbegin \DIFdel{to subsets of students for whom that feedback is relevant}\DIFdelend .

\DIFdelbegin \DIFdel{We introduce }\DIFdelend \DIFaddbegin \DIFadd{This chapter introduces }\DIFaddend Foobaz, a \DIFdelbegin \DIFdel{user interface }\DIFdelend \DIFaddbegin \DIFadd{system }\DIFaddend for giving tailored feedback on student variable names at scale. Foobaz enables teachers to explore and comment on the quality of student-chosen variable names, given the role the variables play in \DIFdelbegin \DIFdel{students' code (see Figure \ref{fig:figure2})}\DIFdelend \DIFaddbegin \DIFadd{student solutions}\DIFaddend . A variable's \DIFdelbegin \DIFdel{role }\DIFdelend \DIFaddbegin {\it \DIFadd{role}} \DIFaddend is a function of the sequence of values that the variable \DIFdelbegin \DIFdel{contains }\DIFdelend \DIFaddbegin \DIFadd{takes on }\DIFaddend during program execution. The variety of student-chosen variable names for each role makes evaluating every one prohibitive. Using Foobaz, the teacher can \DIFdelbegin \DIFdel{label }\DIFdelend \DIFaddbegin {\it \DIFadd{label}} \DIFaddend a small subset of good and bad names for each role \DIFdelbegin \DIFdel{. 
}\DIFdelend \DIFaddbegin \DIFadd{with judgments like ``too short'' or ``misleading.'' Figure \ref{fig:figure2} shows the teacher interface.
}\DIFaddend 

\DIFaddbegin \begin{figure*}
\centering
\includegraphics[width=0.75\linewidth]{Body/figures/foobaz/FoobazInitialView4.jpg}
\caption{\DIFaddFL{The Foobaz teacher interface. The teacher is presented with a scrollable list of normalized solutions, each followed by a table of student-chosen variable names. Some names shown here have been labeled by the teacher as ``misleading or vague,'' ``too short,'' or ``fine.''}}
\DIFaddFL{~}\label{fig:figure2}
\end{figure*}

\DIFaddend Foobaz then uses these labeled variable names to create pedagogically valuable active learning exercises in the format of multiple choice quizzes. These quizzes are a form of feedback for many more students than just those whose variable names receive a teacher \DIFdelbegin \DIFdel{'s label. The }\DIFdelend \DIFaddbegin \DIFadd{label. Rather than just receive a label on one of their own names, the }\DIFaddend quizzes also allow students to see examples of good and bad alternatives\DIFdelbegin \DIFdel{, rather than just receive a label on one of their own names. }\DIFdelend \DIFaddbegin \DIFadd{. This moves the feedback closer to the ideals described by variation theory.
}\DIFaddend 

\DIFdelbegin \DIFdel{Foobaz personalizes teacher quizzes for each student, }\DIFdelend \DIFaddbegin \DIFadd{Quizzes are personalized by Foobaz }\DIFaddend so that students \DIFdelbegin \DIFdel{can }\DIFdelend consider good and bad names for variables \DIFdelbegin \DIFdel{that exist }\DIFdelend \DIFaddbegin \DIFadd{with the same role }\DIFaddend in their own solutions. Personalized quizzes render the \DIFdelbegin \DIFdel{student's original code submission }\DIFdelend \DIFaddbegin \DIFadd{original student solution }\DIFaddend with a specific variable replaced by an arbitrary symbol. The quiz presents the student with several variable names as candidate replacements for the symbol, one of which may be the student's original choice. The student selects appropriate labels for the variable names before checking their labels against teacher labels\DIFdelbegin \DIFdel{and comments}\DIFdelend .

In two user studies, \DIFdelbegin \DIFdel{we demonstrate }\DIFdelend the capabilities and workflow enabled by this novel interface \DIFdelbegin \DIFdel{for both teachers and students. In the first study , we show }\DIFdelend \DIFaddbegin \DIFadd{are demonstrated. The first study shows }\DIFaddend that the interface helped teachers give personalized variable name feedback on thousands of student solutions from an introductory programming MOOC on edX. In the second study, students composed solutions to the same programming exercises and \DIFdelbegin \DIFdel{we capture their reactions to the }\DIFdelend \DIFaddbegin \DIFadd{received personalized }\DIFaddend quizzes generated with Foobaz by teachers in the first study.

%DIF > \todo{remove we from the rest of this chapter}
\DIFaddbegin 

\DIFaddend \section{User Interface}

\DIFdelbegin \DIFdel{Consider an introductory programming MOOC where thousands }\DIFdelend \DIFaddbegin \DIFadd{Thousands }\DIFaddend of students submit correct solutions to \DIFdelbegin \DIFdel{a programming exercise. Imagine that many }\DIFdelend \DIFaddbegin \DIFadd{the same programming problem in MOOCs and massive residential courses. Many }\DIFaddend of these solutions include \DIFdelbegin \DIFdel{a variable that takes }\DIFdelend \DIFaddbegin \DIFadd{variables that take }\DIFaddend on the same sequence of values \DIFdelbegin \DIFdel{, like a running sum of the elements in an input argument. While most students decide to name this variable $result$, others decide to give it obscure or less descriptive names like $p$, $val1$}\DIFdelend \DIFaddbegin \DIFadd{when run on the same test cases. Table~\ref{examplecommonvars} in Chapter~\ref{chapter:overcode} shows these common variables, the names students most commonly gave them, and some of the less common names for the same variables}\DIFaddend .

The quality of a variable's name is most easily judged when the teacher understands its algorithmic role and relationship to other variable names within the surrounding code. At scale, this can be difficult and frustrating, because while variable roles can be repetitive across many solutions\DIFdelbegin \DIFdel{(}\DIFdelend \DIFaddbegin \DIFadd{, their names can be unpredictable and vary greatly in quality, }\DIFaddend e.g., \DIFaddbegin \texttt{\DIFadd{result}}\DIFadd{, }\texttt{\DIFadd{val1}}\DIFadd{, or }\texttt{\DIFadd{s}} \DIFadd{as names for }\DIFaddend a particular running sum\DIFdelbegin \DIFdel{), their names can be unpredictable ($result$, $val1$, $s$)}\DIFdelend . Instead of \DIFdelbegin \DIFdel{browsing student submissions in a linear fashion, it would be better if the teacher }\DIFdelend \DIFaddbegin \DIFadd{giving feedback on variable names by browsing student solutions one by one, teachers }\DIFaddend could provide feedback on the basis of variable roles.

In Foobaz, teachers can browse \emph{stacks} of student \DIFdelbegin \DIFdel{submissions}\DIFdelend \DIFaddbegin \DIFadd{solutions represented by platonic solutions}\DIFaddend . A stack is a set of solutions whose code is identical after \DIFdelbegin \DIFdel{normalizing formattingand }\DIFdelend \DIFaddbegin \DIFadd{standardizing formatting, normalizing }\DIFaddend variable names, removing comments, and ignoring the exact order of statements. Within a stack, the teacher can browse the different sets of variable names that students chose, label some of them as, e.g., ``too short'' or ``misleading,'' and add comments. 

\DIFdelbegin \DIFdel{Teacher }\DIFdelend \DIFaddbegin \DIFadd{Foobaz uses teacher }\DIFaddend labels and comments \DIFdelbegin \DIFdel{are used }\DIFdelend to provide students with tailored feedback in the form of personalized quizzes on variable names. \DIFdelbegin \DIFdel{By providing feedback on only a few variable names , personalized quizzes are generated that are potentially relevant to thousands of students. }\DIFdelend \DIFaddbegin \DIFadd{A teacher only needs to label a few student-chosen names for the same variable role. Foobaz will then generate a quiz and every student whose solution contains that variable role can receive a personalized form of that quiz. %DIF > This quiz may be relevant to a significant fraction of students who submitted solutions.
}

%DIF > By providing feedback on only a few variable names, personalized quizzes are generated that are potentially relevant to thousands of students. 
\DIFaddend Foobaz is distinct from powergrading systems\DIFdelbegin \DIFdel{: instead }\DIFdelend \DIFaddbegin \DIFadd{. Instead }\DIFaddend of grading as many names as possible, \DIFdelbegin \DIFdel{the system produces personalized quizzes that have excellent examples }\DIFdelend \DIFaddbegin \DIFadd{teachers work with Foobaz to strategically label a small subset }\DIFaddend of good and bad \DIFdelbegin \DIFdel{variable names students would not otherwise get to see and learn from }\DIFdelend \DIFaddbegin \DIFadd{examples. If powergrading were possible, students might get feedback on their own variable name choices, but with Foobaz, they can learn from others' good and bad choices}\DIFaddend .

\subsection{Producing Stacks and Common Variables}
\DIFdelbegin \DIFdel{Foobaz enables feedback at scale because teachers can browse solutions on the basis of }\emph{\DIFdel{stacks of similar solutions}} %DIFAUXCMD
\DIFdel{and }\emph{\DIFdel{common variables}}%DIFAUXCMD
\DIFdel{. These groupings are automatically produced by the }\DIFdelend \DIFaddbegin \DIFadd{The }\DIFaddend OverCode analysis pipeline \DIFdelbegin \DIFdel{, which starts by executing each student 's }\DIFdelend \DIFaddbegin \DIFadd{executes each student }\DIFaddend solution on a \DIFdelbegin \DIFdel{single }\DIFdelend test case and \DIFdelbegin \DIFdel{tracking }\DIFdelend \DIFaddbegin \DIFadd{tracks }\DIFaddend the sequences of values that variables take on. Common variables are identified as those that behave the same way\DIFdelbegin \DIFdel{(}\DIFdelend \DIFaddbegin \DIFadd{, }\DIFaddend i.e., take on the same sequence of values\DIFdelbegin \DIFdel{) }\DIFdelend \DIFaddbegin \DIFadd{, }\DIFaddend across multiple solutions. \DIFdelbegin \DIFdel{Raw solutions are then normalized by renaming instances of common variables with their most popular names, as well as removing comments and extra whitespace. Normalized solutions that have the same set of lines can be grouped together into a }\emph{\DIFdel{stack}}%DIFAUXCMD
\DIFdel{, with a single representative on top for the teacher to read}\DIFdelend \DIFaddbegin \DIFadd{After executing every solution, the OverCode pipeline groups solutions into stacks of similar solutions. Each stack is represented by a single platonic solution. In the Foobaz teacher view, the teacher browses the platonic solutions and annotates the quality of variable names for common variables}\DIFaddend . 

The stacking performed by the system directly reduces the number of implementations that a teacher needs to analyze in order to provide feedback to the majority of the class. \DIFdelbegin \DIFdel{Furthermore, Foobaz is sensitive to }\emph{\DIFdel{variable roles}}%DIFAUXCMD
\DIFdel{, meaning that variables that }\DIFdelend \DIFaddbegin \DIFadd{Variables that }\DIFaddend behave the same across different stacks are linked together as a single common variable. The result is that feedback provided for a variable in one stack is propagated to variables that play out the same behavior in \emph{other} stacks.

\subsection{Rating Variable Names}

The Foobaz interface lets the teacher rate variable names in the context of their role in the program. Figure \ref{fig:figure2} shows the teacher \DIFdelbegin \DIFdel{'s }\DIFdelend view while they perform this task. 

The teacher is presented with a scrollable list of stacks. Each stack is represented as \DIFdelbegin \DIFdel{normalized stack code }\DIFdelend \DIFaddbegin \DIFadd{a platonic solution }\DIFaddend followed by a table of alternative variable names. Since some of the tables are taller than the screen, the \DIFdelbegin \DIFdel{normalized stack code }\DIFdelend \DIFaddbegin \DIFadd{platonic solution }\DIFaddend is pinned to the screen in such a way that it remains visible until the next stack is scrolled into view.

Each column of the table represents the common variables occurring in the stack, where each common variable's most popular name serves as the column header. Each row of the table represents a unique set of variable names used in a solution\DIFdelbegin \DIFdel{(e. g., $secretWord$, $lettersGuessed$, $guessedWord$, $char$)}\DIFdelend . \DIFaddbegin \DIFadd{For example, }\texttt{\DIFadd{secretWord}}\DIFadd{, }\texttt{\DIFadd{lettersGuessed}}\DIFadd{, }\texttt{\DIFadd{guessedWord}}\DIFadd{, and }\texttt{\DIFadd{char}} \DIFadd{are all the names that were used in one particular raw solution. }\DIFaddend We show \emph{sets} of variable name choices, rather than independent columns of variable names, because we found in early pilot testing that variable names can at times make more sense when seen as a group, rather than as individual naming decisions. This helps give teachers the context and confidence to assign quality judgments.

As the teacher brushes over the names of a common variable in the table, its occurrences in the \DIFdelbegin \DIFdel{normalized code }\DIFdelend \DIFaddbegin \DIFadd{platonic solution }\DIFaddend are highlighted, so they can develop an understanding of the variable's role in the solution. The teacher can then go down the list of student-chosen names, rating as many of them as they desire using three different labels: ``misleading or vague,'' ``too short,'' or ``fine.'' These labels were based on early pilot testing with beginner programmers but future iterations of Foobaz may support teacher-added labels. Next to each name, they can also see how frequently it was given to that common variable across all solutions in the dataset, and can sort the entire table by this frequency. In order to draw teachers' attention to student-chosen variable names, variables with names that match one of given parameter names provided with the homework prompt are greyed out. The long tail of infrequently used names can be a place where both the best and worst examples of names can be found.

It is important to note that each common variable is likely to occur in multiple stacks. When the teacher selects a particular name, or set of names, for a common variable, occurrences in other stacks are highlighted as well. When they assign a label to a name, the label is propagated to all uses of the name for that common variable, across all the stacks. This has the effect of ``filling down'' the teacher \DIFdelbegin \DIFdel{'s }\DIFdelend annotations. As teachers scroll down, they see that much of their feedback has been propagated for them, letting them focus on the remaining best and worst examples they might find. 

A progress bar at the top of the page indicates the coverage of their feedback across all variable names. Since teachers were motivated by the progress bar to maximize their coverage, we provided a button which would select and scroll into view the next most popular, yet unlabeled name for a common variable. Also included to maximize efficiency, the interface supports navigation through the variable names in the table using arrow keys. Teachers can also press hotkeys to rate variables instead of clicking on one of the three quality judgments, e.g., press \DIFdelbegin \DIFdel{$2$ }\DIFdelend \DIFaddbegin \texttt{\DIFadd{2}} \DIFaddend to rate a variable name as ``too short.''

\begin{figure}
\centering
\includegraphics[width=0.95\columnwidth]{Body/figures/foobaz/feedbackQuizExample.png}
\caption{A personalized quiz as seen by the student, delivered by \DIFdelbeginFL \DIFdelFL{an edX-based system maintained by a large university}\DIFdelendFL \DIFaddbeginFL \DIFaddFL{edX infrastructure}\DIFaddendFL . \DIFdelbeginFL \DIFdelFL{Students are }\DIFdelendFL \DIFaddbeginFL \DIFaddFL{The student is }\DIFaddendFL shown their own code, with a variable name replaced by an arbitrary symbol, followed by variable names for the student to consider and label using the same labels that were available to the teacher. After the student has submitted their own judgments, the teacher \DIFdelbeginFL \DIFdelFL{'s }\DIFdelendFL labels are revealed, along with their explanatory comments.}~\label{fig:figure4}
\end{figure}

\begin{figure}
\begin{minipage}{1\columnwidth}
\centering
\DIFdelbeginFL %DIFDELCMD < \includegraphics[width=0.85\columnwidth]{Body/figures/foobaz/quizPreviewHangman.png}
%DIFDELCMD < %%%
\DIFdelendFL \DIFaddbeginFL \includegraphics[width=0.7\columnwidth]{Body/figures/foobaz/quizPreviewHangman.png}
\DIFaddendFL \caption{The quiz preview pane of the Foobaz teacher interface. Variable behavior was logged by running all solutions on a common test case. This particular teacher created quizzes for the common variable \DIFdelbeginFL \DIFdelFL{$i$ }\DIFdelendFL \DIFaddbeginFL \texttt{\DIFaddFL{i}} \DIFaddendFL that iterates through indices of a list, the common variable \DIFdelbeginFL \DIFdelFL{$letter$}\DIFdelendFL \DIFaddbeginFL \texttt{\DIFaddFL{letter}}\DIFaddendFL , which iterates through the characters in an input string, and the common variable \DIFdelbeginFL \DIFdelFL{$result$}\DIFdelendFL \DIFaddbeginFL \texttt{\DIFaddFL{result}}\DIFaddendFL , which accumulates one of the acceptable return values, `\DIFdelbeginFL \DIFdelFL{$\_i\_e\_$}\DIFdelendFL \DIFaddbeginFL \texttt{\DIFaddFL{\_i\_e\_}}\DIFaddendFL .'}~\label{fig:figure3}
\end{minipage}
\DIFaddbeginFL \end{figure}
\DIFaddend 

\DIFdelbegin %DIFDELCMD < \bigskip
%DIFDELCMD < %%%
\DIFdelend \DIFaddbegin \begin{figure}
\DIFaddendFL \begin{minipage}{1\columnwidth}
\centering
\begin{tabular} {|l|l|r|}
\hline
\tabhead{Problem Description} & \tabhead{Source} & \tabhead{Solutions} \\ \hline \hline
\codevar{iterPower} & 6.00x (edX) & 3875 \\ \hline
\codevar{hangman} & 6.00x (edX) & 1118 \\ \hline
\codevar{computeDerivative} & 6.00x (edX) & 1433 \\ \hline
\codevar{dotProduct} & 6.0001 (residential) & 229 \\ \hline
\end{tabular}
\caption{Number of solutions in datasets.}
\label{solutioncounttable}
\end{minipage}

\bigskip
\begin{minipage}{1\columnwidth}
\centering
\begin{tabular}{|l|r|r|r|r|}
\hline
\tabhead{Problem} & \tabhead{Misleading} & \tabhead{Too short} & \tabhead{Good} & \tabhead{Total names} \\
& \tabhead{or Vague} & & & \\ \hline \hline
\codevar{iterPower} & 3 & 3 & 15 & 929 \\ \hline
\codevar{hangman} &7 & 4 & 10 & 763 \\ \hline
\codevar{compDeriv} & 6 & 5 & 10 & 670 \\ \hline
\codevar{dotProduct} & 11 & 3 & 17 & 180 \\ \hline
\end{tabular}
\caption{Subjects in \DIFdelbeginFL \DIFdelFL{Study 1}\DIFdelendFL \DIFaddbeginFL \DIFaddFL{the teacher study}\DIFaddendFL , on average, labeled a small fraction of the total names, covering all three provided name categories.}~\label{tab:averageLabeling}
\end{minipage}

\end{figure}

\subsection{Making Quizzes}

Each quiz is an active learning exercise that asks the student to think about good and bad names for a common variable. Quizzes begin by showing a solution with that common variable's name replaced by an arbitrary symbol everywhere it occurs. In a personalized quiz, the solution is the student's own, as shown in Figure \ref{fig:figure4}. The quiz presents the student with several variable names as candidate replacements for the symbol, one of which may be the student's original choice. The student labels these names before checking their labels against the teacher's. If a student \DIFdelbegin \DIFdel{'s }\DIFdelend solution includes a particular common variable, then that student can receive a personalized version of the quiz about that variable.

As teachers rate variables by attaching labels to them, quizzes are created with these names as their good and bad examples. Using the Toggle Quiz Preview button, teachers can see a preview of the quizzes (Figure \ref{fig:figure3}) alongside the scrollable list of stacks and watch the quizzes grow as they rate more names. They can hide the quiz preview to reduce visual clutter while they explore all the stacks, common variables, and interesting alternative names.

If two different common variables perform the same conceptual role in student solutions but do not go through the exact same sequence of values, then the teacher can use the ``Merge'' button to combine the quizzes about each common variable into a single quiz. This quiz becomes relevant to students who have either common variable in their own solution and can be sent out to both groups.

Ultimately, the teachers' goal is to provide pedagogically valuable personalized quizzes to as many of the hundreds or thousands of students in the course as possible. Analogous to the progress bar for variable names, the quiz preview pane includes a progress bar for the number of stacks of solutions that will receive at least one quiz. Like the previously discussed button for selecting the next most popular unlabeled name, the quiz preview pane also includes a button for jumping to the next largest stack of student solutions that do not yet have any quizzes. If the teacher deems one of their automatically populated quizzes to be not pedagogically valuable, then they can uncheck the option to send that quiz back to students. To provide more illustrative examples that might not have been produced in student solutions, teachers can add their own custom good and bad variable name examples and write explanations in the comment field associated with each alternative name.

\section{Evaluation}

We evaluate \DIFdelbegin \DIFdel{Foobaz's teacher and student-facing }\DIFdelend \DIFaddbegin \DIFadd{the Foobaz teacher and student }\DIFaddend interfaces with two consecutive user studies, one for each population. In order to evaluate \DIFdelbegin \DIFdel{Foobaz's scalability }\DIFdelend \DIFaddbegin \DIFadd{the scalability of Foobaz}\DIFaddend , the solutions seen by teachers were collected from MOOCs with thousands of students and a residential college class of several hundred students.

\subsection{Datasets}

We evaluated Foobaz on sets of correct solutions to four different programming \DIFdelbegin \DIFdel{exercises}\DIFdelend \DIFaddbegin \DIFadd{problems}\DIFaddend , ranging in size from a couple hundred to several thousand solutions, collected from 6.00x, an introductory programming course in Python that was offered on edX in the fall of 2012, and 6.0001, a residential introductory programming course in Python offered at MIT in the fall of 2014 (see Figure \ref{solutioncounttable}). The four exercises, referred to here as \codevar{iterPower}, \codevar{hangman}, \codevar{dotProduct}, and \codevar{computeDerivative}, are representative of typical exercises that students solve in the early weeks of an introductory programming course. They have varying levels of complexity and ask students to perform loop computation over three fundamental Python data types, integers, strings, and lists.

%DIF > \textbf{Power-law Distribution of Names} 
%DIF > The approximate power-law-type distribution of stacks from the thousands of edX solutions has already been reported in prior work, such as Figure 12 in \cite{overcode}. 
\DIFaddbegin 

\DIFadd{The distribution of unique combinations of variable names and behaviors does not differ significantly from a power-law distribution. The Kolmogorov-Smirnov test for a difference between the best-fitting power-law distribution and each dataset all gave p-values of at least $0.44$ (i.e., not significantly different), with the best-fitting exponent of the distribution between $1.79$ and $2.13$. Within each stack, the names for any particular variable appear to follow the same distribution.
}

\DIFadd{There is no ground truth for which variable names are ``bad,'' but we can report the counts of variables that the teachers chose to label and the counts of unique names for the top common variables in each problem. In the 3875 }\codevar{iterPower} \DIFadd{solutions, there were 179 different names given to a variable representing the base being exponentiated and 64 different names for a variable representing the exponent. In the 1393 }\codevar{computeDerivative} \DIFadd{solutions, there were 176 different names given for the variable containing the result and 39 different names for the most commonly used iterator variable. In the 1118 }\codevar{hangman} \DIFadd{solutions, there were 50 names given to the variable that iteratively takes on the characters of the secret word input argument and 99 names given to the variable containing the string most commonly returned by solutions as the answer.
}

\DIFaddend \subsection{Teacher Study}

\DIFaddbegin \DIFadd{The teacher study was designed to assess whether teachers could create variable name quizzes with the Foobaz teacher interface. If teachers could create quizzes, the study would measure how well those quizzes covered the student solutions in the dataset. These questions were answered by analyzing logs of each subject's activity while using Foobaz and their responses to survey questions about their experiences.
}

\DIFadd{The hour-long session contained a warm-up exercise, a Foobaz demonstration, and a session where subjects used Foobaz to create as many variable name quizzes for as many students as possible. }\DIFaddend During the initial briefing, teachers were informed that they would be looking at solutions that had already passed an autograder and instructed to focus only on variable names, ignoring other aspects of code style, structure, and correctness. Teachers \DIFdelbegin \DIFdel{were invited to look over a }\DIFdelend \DIFaddbegin \DIFadd{then attempt a warm-up exercise: composing variable name quizzes inspired by the variation in variable names they see in a baseline interface for viewing student solutions to problem $1$. They then watched a demonstration-based tutorial of Foobaz on student solutions to problem $2$, i.e., the training step. Finally they attempted to create variable name quizzes using the Foobaz interface for student solutions to problem $3$, i.e., the experimental condition. Over the course of the session, each teacher saw student solutions to three of the four possible problems, and counterbalancing was used to ensure that the same problems were not always being shown in the same interface. 
}

%DIF > \subsubsection{Warm-up}

\DIFadd{Before interacting with Foobaz, teachers worked on a control task. Teachers reviewed a }\DIFaddend page in a browser with all solutions concatenated in a random order into a flat list of boxed, syntax-highlighted code. \DIFaddbegin \DIFadd{This is the same baseline interface as was used in the OverCode Coverage Study. }\DIFaddend We chose this design as our baseline to emulate existing methods of reviewing student functions. 

Using this baseline interface, teachers were asked first to rate as many good and bad variable names as possible, with an eye toward maximizing coverage of names\DIFdelbegin \DIFdel{(Task Part 1). }\DIFdelend \DIFaddbegin \DIFadd{, i.e., Task Part 1. }\DIFaddend Next, the teachers were shown an example of a quiz and were asked to compose their own by listing variable names and labeling them as good or bad with whatever short descriptors and explanatory comments they wished\DIFdelbegin \DIFdel{(Task Part 2). }\DIFdelend \DIFaddbegin \DIFadd{, i.e., Task Part 2. }\DIFaddend Participants were given 5 minutes for each task, and then asked to fill out a survey about their experience. \DIFdelbegin \DIFdel{(}\DIFdelend The answers to two of these surveys were lost so we only report survey results from 8 of the 10 participants. 
\DIFdelbegin \DIFdel{)
}\DIFdelend 

\DIFaddbegin \DIFadd{The survey questions included both free response and 7-point Likert scale survey questions (1 means strong disagreement and 7 means strong agreement). The free response questions were:
} \begin{enumerate}  
\item \DIFadd{``What did you like about this process of providing feedback on variable names?''
}\item \DIFadd{``What did you NOT like about this process of providing feedback on variable names?'' 
}\item \DIFadd{``What did you wish you could have or achieve during this process of providing feedback on variable names?'' 
}\item \DIFadd{``What, if anything, did you find in the data that surprised you?''
} \end{enumerate} 
\DIFadd{The 7-point Likert scale survey questions were:
} \begin{enumerate} 
\item \DIFadd{``This interface helped me provide feedback to many students.''
}\item \DIFadd{``The interface helped me develop a high-level view of students' variable naming skills.''
}\item \DIFadd{``I saw a large percentage of these students' variable names.''
}\item \DIFadd{``I was able to give specific, personalized feedback to many students.''
}\item \DIFadd{``The system amplified my effort.''
} \end{enumerate} 

%DIF > \subsubsection{Experimental Condition}

\DIFaddend Participants learned about the Foobaz interface by watching a tutorial video. This training process took between 10 and 15 minutes depending on the dataset shown in the video. Participants were encouraged to hold their questions to the end, and answer them by interacting with the interface. 

Participants performed both Task Part 1 and 2 on a third dataset of solutions in the Foobaz teacher interface. Participants were asked to spend 5 minutes to perform each task, though some decided to spend more time. They filled out the same \DIFdelbegin \DIFdel{surveys }\DIFdelend \DIFaddbegin \DIFadd{survey }\DIFaddend about their experience again, followed by a final survey \DIFdelbegin \DIFdel{about which features of the Foobaz interface they found helpful}\DIFdelend \DIFaddbegin \DIFadd{with 7-point Likert scale questions about each Foobaz feature and Foobaz overall}\DIFaddend .

\subsubsection{Apparatus}

In all sessions, we used a laptop with a 15.4-inch 2880x1800 pixel Retina screen. All participants' interactions with the system were logged with timestamps\DIFdelbegin \DIFdel{using Meteor collections}\DIFdelend .

\subsubsection{Participants}

We recruited 10 participants (6 female) with ages between 20 and 29 ($\mu=23.1$, $\sigma=2.7$) through computer science-specific and campus-specific mailing lists and Facebook groups. All participants self-reported that they had been a grader, lab assistant, or teaching assistant for a Python course. 

\subsubsection{Results}

\textbf{Problems with Baseline} \DIFdelbegin \DIFdel{. }\DIFdelend When asked to comment on good and bad variable names based on the baseline interface, most teachers immediately began scrolling through solutions one by one, taking notes as they went, fully aware that they would only be able to skim a small, random fraction of the total number of solutions. The sheer volume of solutions was overwhelming to some. 

Results of the post-baseline survey reinforce critical usability issues with the status quo that Foobaz was designed to address. In these survey responses, teachers expressed an appreciation for the simplicity, readability, and searchability of the baseline interface but wished that the endless stream of often very similar solutions could be summarized or ``de-duped'' before they had to read through them. One teacher requested that variables be automatically identified, so that all references to a variable can be highlighted. This may have been a direct consequence of the fact that it was not possible to search for all the occurrences of the variable name \DIFdelbegin \DIFdel{$i$ }\DIFdelend \DIFaddbegin \texttt{\DIFadd{i}} \DIFaddend without the browser also highlighting all the \DIFdelbegin \DIFdel{$i$}\DIFdelend \DIFaddbegin \texttt{\DIFadd{i}}\DIFaddend 's within the rest of the names and keywords, e.g., the \DIFdelbegin \DIFdel{$i$ }\DIFdelend \DIFaddbegin \texttt{\DIFadd{i}} \DIFaddend in ``if.'' Another teacher requested an automated count of common variable names. These teachers anticipated three critical features of the Foobaz interface: deduplication, variable name counts, and highlighting all occurrences of selected names.

Two teachers commented on the importance of understanding the role a variable takes on within the program. One teacher writes, ``Many times the variable names meant something but I still had to read the code to make sure that it meant what I thought it meant in the context of the code.'' The second teacher observed, ``Whether a variable name is good or bad depends a lot on its function within the code, and since each code block has a somewhat unique structure, I felt like I should be creating separate categories for good vs. bad variables names, e.g., `for the derivative result,' `for a counter in a loop through poly,' etc.'' This is exactly what the Foobaz interface is designed to support. 

\DIFdelbegin \textbf{\DIFdel{Power-law Distribution of Names}}
%DIFAUXCMD
\DIFdel{The approximately power-law-type distribution of stacks of code from the thousands of edX solutions has already been reported in prior work, such as Figure 12 in \mbox{%DIFAUXCMD
\cite{overcode}}%DIFAUXCMD
. In Foobaz, the distribution of unique combinations of variable names and behaviors does not differ
significantly from a power-law distribution; the Kolmogorov-Smirnov test for a difference between the best-fitting power-law distribution and each dataset all gave p-values of at least $0.44$ (i. e., not significantly different), with }\DIFdelend \DIFaddbegin \DIFadd{Teachers did not respond strongly to the Likert scale questions about how much the interfaces helped them until after they used Foobaz. Specifically, after using the baseline interface, teachers did not strongly agree or disagree with the statement ``I was able to give specific, personalized feedback to many students'' ($\mu=3$, $\sigma = 1.4$ on a 7-point scale). Teachers slightly disagreed with the statement ``I saw a large percentage of these students' variable names'' ($\mu=2.6$, $\sigma=1.2$) and slightly agreed with the statement ``This interface helped me provide feedback to many students'' ($\mu=3.6$, $\sigma=2.0$). After using the Foobaz interface, }\DIFaddend the \DIFdelbegin \DIFdel{best-fitting exponent of the distribution between
$1.79$ }\DIFdelend \DIFaddbegin \DIFadd{mean level of agreement with these statements jumped to 5.5 ($\sigma=1.7$), 6.3 ($\sigma=0.46$), }\DIFaddend and \DIFdelbegin \DIFdel{$2.13$. Within each stack, the names for any particular variable appear to follow the same distribution.
}%DIFDELCMD < 

%DIFDELCMD < %%%
\DIFdel{There is no ground truth for which variable names are ``bad,'' but we can report the counts of variables that the users chose to label and the counts of unique names for the top common variables in each problem. In the 3875 }%DIFDELCMD < \codevar{iterPower} %%%
\DIFdel{solutions, there were 179 different names given to a variable representing the base being exponentiated and 64 different names for a variable representing the exponent. In the 1393 }%DIFDELCMD < \codevar{computeDerivative} %%%
\DIFdel{solutions, there were 176 different namesgiven for the variable containing the result and 39 different names for the most commonly used iterator variable. In the 1118 }%DIFDELCMD < \codevar{hangman} %%%
\DIFdel{solutions, there were 50 names given to the variable that iteratively takes on the characters of the `secret word' input argument and 99 names given to the variable containing the string most commonly returned by solutions as the answer. 
}%DIFDELCMD < 

%DIFDELCMD < %%%
\DIFdel{Figure \ref{tab:averageLabeling} shows the fraction of names that subjects labeled in Study 1, and the distribution of those names across various categories of quality. In spite of the unknown underlying distribution of good and bad variable names, the subjects are finding and labeling variables across all available categories in order to make quizzes}\DIFdelend \DIFaddbegin \DIFadd{6.6 ($\sigma=0.5$)}\DIFaddend .

\textbf{Efficiency of Foobaz} \DIFdelbegin \DIFdel{. }\DIFdelend The efficiency of using Foobaz to create feedback came up repeatedly in teachers' survey responses. Teachers appreciated the feeling of doing the task ``at scale.'' One teacher noted that it felt like, ``with each action, I was helping a large number of students'' without ``repeating or wasting effort too much.'' While using the button that highlights and scrolls the next most popular, untagged variable name into view, a teacher told the experimenter, ``I love this button!'' The arrow key-based navigation through tables of variable names was appreciated as well. At least one teacher commented that ``seeing variable names grouped by their role made the process much more efficient.'' 

The efficiency gains of the interface were hampered by, at times, a noticeably sluggish interface response time to some queries that scaled with the size of the dataset. This sluggishness \DIFdelbegin \DIFdel{can be cut down by reducing the many unnecessarily repeated calculationsmade in the current implementation.}\DIFdelend \DIFaddbegin \DIFadd{was significantly reduced by implementing the Foobaz teacher interface in a templating language instead than d3.js, precalculating variable name counts, and removing repeated calculations.%DIF >  as possible.%can be cut down by reducing the repeated calculations made in the current implementation.
}\DIFaddend 

\textbf{Quiz Composition} \DIFdelbegin \DIFdel{. }\DIFdelend In both interfaces, teachers appreciated the potential pedagogical value of making quizzes: ``I \DIFdelbegin \DIFdel{… }\DIFdelend \DIFaddbegin \DIFadd{... }\DIFaddend liked that with the [quiz] I made, students can actually learn about good alternatives. ... [T]hey can change their variable names after putting extra thought into it.'' A teacher expressed appreciation that, using the Foobaz interface, they could generate quizzes based on actual submitted code as well as their own comments. 

\DIFdelbegin \textbf{\DIFdel{Coverage}}%DIFAUXCMD
\DIFdel{. Immediately after using the baseline interface, teachers did not strongly agree or disagree with the statement ``I was able to give specific, personalized feedback to many students'' ($\mu =3$, $\sigma = 1.4$ on a 7-point Likert scale with 1: strong disagreement and 7: strong agreement). Teachers slightly disagreed with the statement ``I saw a large percentage of these students' variable names '' ($\mu=2.6$, $\sigma = 1.2$) and slightly agreed with the statement ``This interface helped me provide feedback to many students'' ($\mu=3.6$, $\sigma = 2.0$).After using the Foobaz interface, the mean level of agreement with these statements jumped to 5.5 ($\sigma = 1.7$), 6.3 ($\sigma = 0.46$), and 6.6 ($\sigma = 0.5$)}\DIFdelend \DIFaddbegin \DIFadd{In spite of the unknown underlying distribution of good and bad variable names, the teachers find and label variables across all available categories in order to make quizzes. Figure \ref{tab:averageLabeling} shows that teachers labeled only a small fraction of the total number of unique names and still found multiple examples for each of the categories of quality, i.e., misleading/vague, too short, and fine/good}\DIFaddend .

\DIFdelbegin \DIFdel{Figure \ref{fig:comboquizcoverage} shows that most }\DIFdelend \DIFaddbegin \textbf{\DIFadd{Coverage}} \DIFadd{Most }\DIFaddend solutions in the edX datasets received at least one or two quizzes\DIFdelbegin \DIFdel{. Solutions }\DIFdelend \DIFaddbegin \DIFadd{, as shown }\DIFaddend in Figure \ref{fig:comboquizcoverage}\DIFdelbegin \DIFdel{have multiple common variables on which they could potentially be quizzed (3, 3, and 4 on average in subfigures (a ), (b), and (c), respectively).
One teacher }\DIFdelend \DIFaddbegin \DIFadd{. Figure \ref{fig:variableCoverage} illustrates that, within minutes of their first interaction with the system, a teacher can label a significant portion of student-chosen variable names in a dataset. Their progress trails off as they encounter the long tail of names for particular roles and transition to creating better quizzes.
}

\DIFadd{Due to technical difficulties, only one of the ten teachers }\DIFaddend used Foobaz to create quizzes for \DIFdelbegin \DIFdel{a much smaller }\DIFdelend \DIFaddbegin \DIFadd{the 6.0001 }\DIFaddend dataset, collected from the residential class of only several hundred students. They achieved a similar percentage of coverage\DIFdelbegin \DIFdel{(}\DIFdelend \DIFaddbegin \DIFadd{, i.e., }\DIFaddend 87\% of student solutions received at least one quiz\DIFdelbegin \DIFdel{) }\DIFdelend \DIFaddbegin \DIFadd{, }\DIFaddend in a similar amount of time, showing that the Foobaz workflow and output \DIFdelbegin \DIFdel{appears }\DIFdelend \DIFaddbegin \DIFadd{may be }\DIFaddend relatively invariant to the size of the dataset.
\DIFdelbegin \DIFdel{Figure \ref{fig:variableCoverage} illustrates that, within minutes of their first interaction with the system, teachers can label a significant portion of student-chosen variable names in a dataset, though their progress trails off as they encounter the long tail of names for particular roles and transition to creating better quizzes.
}\DIFdelend 

Combined with Figure \ref{tab:averageLabeling}, Figure \ref{fig:comboquizcoverage} also shows that, by only labeling approximately 20 variable names in each of the edX datasets with thousands of student solutions, teachers cover at least 85\% of the class with personalized feedback quizzes. Even though Figure \ref{fig:variableCoverage} shows that the coverage of individual variable names with feedback is high, it matters less for Foobaz than in powergrading systems. What matters more is the coverage of students with quizzes that have \DIFdelbegin \DIFdel{excellent }\DIFdelend examples of good and bad variable names students would not otherwise get to see and learn from.

\begin{figure}
\begin{minipage}{1\columnwidth}
\centering
\DIFdelbeginFL %DIFDELCMD < \includegraphics[width=1.0\columnwidth]{Body/figures/foobaz/ComboQuizCoverageFigure2.png}
%DIFDELCMD < %%%
\DIFdelendFL \DIFaddbeginFL \includegraphics[width=0.7\columnwidth]{Body/figures/foobaz/ComboQuizCoverageFigure2.png}
\DIFaddendFL \caption{Quiz coverage of student solutions across three datasets.}~\label{fig:comboquizcoverage}
%DIF < \end{figure}
\DIFdelbeginFL %DIFDELCMD < \end{minipage}
%DIFDELCMD < %%%
\DIFdelendFL 

\DIFaddbeginFL \end{minipage}
\end{figure}
\begin{figure}
\DIFaddendFL \begin{minipage}{1\columnwidth}
%DIF < \begin{figure}
\DIFaddbeginFL 

\DIFaddendFL \centering
\includegraphics[width=0.9\columnwidth]{Body/figures/foobaz/variableCoverageNoTitle.png}
\caption{Variables in \DIFdelbeginFL \DIFdelFL{iterPower }\DIFdelendFL \DIFaddbeginFL \texttt{\DIFaddFL{iterPower}} \DIFaddendFL solutions labeled by each teacher.}~\label{fig:variableCoverage}
\end{minipage}
\end{figure}



\subsection{Student Study}

We ran a second study on the student side of the workflow in order to (1) find out if the teachers' efforts in the previous study produces quizzes that are relevant to these new students and (2) better understand student reactions to this novel form of feedback. In order to do this, we targeted beginner programming students and invited them into the lab \DIFaddbegin \DIFadd{for a one-hour session }\DIFaddend to receive personalized quizzes generated by the teachers in our previous study. \DIFaddbegin \DIFadd{Two experimenters, including the author of this thesis, separately ran students through the study in parallel, using two different machines.
}\DIFaddend 

Before the start of the study, quizzes composed by teachers using Foobaz in the first user study were rendered using the edX framework, ready to be personalized. Since pilot testing with beginner programming students indicated that six alternative variable names in a quiz is too many, teachers' quizzes were randomly subsampled to include a maximum of five alternative names for students to consider. 

Students came into the lab for one hour and composed solutions to one of the four exercises. After receiving each solution, the experimenter mentally executed the solution and compared the behavior of its variables to the variable behavior covered by the teachers' quizzes. If there was a match to one or more teachers' quizzes, one quiz was randomly selected. 
\DIFaddbegin 

\DIFadd{While quiz personalization is now automated, during the study this feature was demonstrated to subjects using the wizard of oz technique. }\DIFaddend The experimenter made a copy of the student \DIFdelbegin \DIFdel{'s code }\DIFdelend \DIFaddbegin \DIFadd{solution }\DIFaddend and replaced every instance of the variable to be quizzed on by an arbitrary symbol, \DIFdelbegin \DIFdel{e.g.}\DIFdelend \DIFaddbegin \DIFadd{i.e.}\DIFaddend , a bold letter \DIFdelbegin \DIFdel{A}\DIFdelend \DIFaddbegin {\bf \DIFadd{A}}\DIFaddend . The experimenter then appended the quiz to the modified copy of the student \DIFdelbegin \DIFdel{'s }\DIFdelend solution and delivered it to the student as a personalized quiz. If there was no match to one or more teachers' quizzes, then the student received a generic quiz, about a variable name in a solution other than their own.

After the student completed their personalized quizzes, they took a survey about their experience. Students who \DIFdelbegin \DIFdel{were able to complete }\DIFdelend \DIFaddbegin \DIFadd{completed }\DIFaddend the coding exercise and quizzes with significant time left in their \DIFaddbegin \DIFadd{one-hour }\DIFaddend session repeated this process for a second programming \DIFdelbegin \DIFdel{assignment}\DIFdelend \DIFaddbegin \DIFadd{problem}\DIFaddend .

\subsubsection{Apparatus}

In all sessions, we used laptops with 15.4-inch or 13.3-inch screens. All participants' interactions with the system were logged using the edX platform infrastructure.

\subsubsection{Participants}

We recruited 6 participants (4 female) who were either undergraduate or graduate students, through computer science-specific and campus-specific mailing lists, Facebook groups, and word of mouth advertising. Their ages were between 18 and 27 ($\mu=20.4$, $\sigma=3.2$). Four of the participants had taken one or two introductory programming courses on Coursera or at their high school or college campus. The remaining two participants had taken three or four classes that involved learning programming languages or computer science concepts, and had some experience with Python.

\subsubsection{Results}
\DIFdelbegin %DIFDELCMD < 

%DIFDELCMD < %%%
\DIFdelend %DIF > \todo{DNHT: do I have examples?}
Six students took a total of 12 quizzes, 11 of which were able to be personalized, even though their solutions were, in some cases, significantly different from the prior student solutions seen by teachers during quiz creation. Correspondingly, in the surveys that followed, students agreed with the statement ``This quiz felt relevant to me'' at an average level of 5.4 ($\sigma = 1.0$) on a 7-point scale. One student \DIFdelbegin \DIFdel{'s }\DIFdelend solution did not receive a personalized quiz because its variables behaved in ways that no teacher in the previous study considered. That student was able to understand the new solution and take the quiz, though it had little relation to their own solution.

Students were asked in the post-quiz surveys about what they learned from the exercise. One student replied, ``Possible variable names are pretty much synonyms, but the more detailed/specific ones are better.'' Another wrote, ``It's worthwhile to pick good variable names.'' Students' average level of agreement with the statement ``The quiz made me think about what makes variable names good or bad'' was 6.2 ($\sigma = 0.9$) on a 7-point scale. Mean levels of agreement with statements about the quizzes being confusing or tedious were 2.9 ($\sigma = 1.5$) and 3.4 ($\sigma = 1.2$), respectively, on a 7-point scale.

Some students observed that this was a very subjective quality of their code to be quizzed on, but all students were able to understand and complete the quizzes they were assigned. Some students disagreed with the instructor-provided ratings. When this occurred and the teacher left no explanation, students had at least one of three reactions: (1) They tried to imagine what the teacher was thinking. (2) They expressed displeasure at the lack of explanation. (3) They decided that they still disagreed with the teacher's judgment. Students did pick up on the teachers' preferred naming conventions through the quizzes. As evidence for this, two students correctly wondered aloud whether a different teacher made each of the quizzes they saw during their session. Given the subjectivity of the task, it may be necessary to grade only on participation, rather than absolute agreement with the teacher.

Students were not informed that quizzes were populated largely by fellow student variable names, but one student volunteered their appreciation for a ``wide spectrum'' of variable names to consider. However, randomly sampling teachers' quizzes down to 5 variable names created some student confusion when there were no positive naming examples in the resulting quiz. This is evidence that sampling should be constrained to include both good and bad examples and the user interface should provide some additional guidance to remind teachers that students highly value a balance of examples, each paired with an explanatory comment.

%DIF > \section{Limitations}
\DIFaddbegin 

%DIF > The first study establishes the usability, learnability, and efficacy of the main Foobaz interface for teachers. The second study is intended to show that students can understand and use the personalized quizzes that Foobaz produces. However, this evaluation of the student experience does not measure pedagogical benefit. %To measure learning benefits, we plan to deploy the tool in a large Python programming course this fall.

\DIFaddend \section{Limitations}

\DIFdelbegin \DIFdel{The first study establishes the usability, learnability, and efficacy of
the main Foobaz interface for teachers. The second study is intended to
show that students can understand and use the personalized quizzes that Foobaz produces. However, this evaluation of the student experience does not yet show pedagogical benefit. To measure learning benefits, we plan to deploy the tool in a
large Python programming course this fall}\DIFdelend \DIFaddbegin \DIFadd{Foobaz may require significant additional work to handle more complex programming problems. OverCode and Foobaz both use the same underlying technique for recognizing common variables across solutions. Programming problems that require more complex solutions may have a great diversity of solutions and a greater diversity of variable behaviors in those solutions. This may reduce the number of student solutions that share common variables. While the Foobaz teacher interface supports merging similar common variables together for the purpose of making quizzes about a more general variable role, it may become too tedious for solutions to more complex programming problems. Fully or semi-supervised methods of merging common variables may need to be developed, which would also help OverCode scale to more complex programming problems}\DIFaddend .

\section{Conclusion}

\DIFdelbegin \DIFdel{We have designed and studied both the teacher and student sides of a novel interface and workflow for providing feedback on student variable names at scale. We hope it will serve as an example and a design pattern for future work on user interfaces for teaching programming to thousands of students at once.
}\DIFdelend \DIFaddbegin \DIFadd{Foobaz demonstrates how a teacher can efficiently give feedback on subjective aspects of solution variation, i.e., variable naming, to students in massive programming classes. These variable name quizzes can be authored in less than 20 minutes and they are reusable as long as the programming problem does not change. 
}

\DIFadd{Foobaz also gives the teacher a high-level view of the distribution of student variable naming choices. In addition to composing feedback, the teacher may be able to revise their teaching materials about variable naming to better reflect common student mistakes.
}




\DIFaddend %\input{Body/bayesian}
%\input{Body/classoverflow}
%\input{Body/grovercode}
%\input{Body/discussion}
%\input{Body/futurework}

%\clearpage
%\appendix
%\addcontentsline{toc}{part}{Appendix}

%\input{Body/appa}
%\import{./Body/appb/}{appb.tex}
%\input{Body/appc}
%\input{Body/biblio.tex}
%\input{Body/index.tex}
\end{document}

